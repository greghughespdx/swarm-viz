{"type":"convention","content":"swarm-viz server defaults to port 3000 (not 3001). client/index.html is the entry point referencing main.js. bun-types must be installed (bun install) before typecheck passes.","classification":"tactical","recorded_at":"2026-02-17T05:29:26.057Z","id":"mx-cff751"}
{"type":"pattern","name":"viz-protocol-layer","description":"DB types stay internal (DbMergeQueueEntry), viz wire types are clean (Agent, AgentMessage, MergeQueueEntry). Server mappers (toAgent, toAgentMessage, toVizMergeEntry, computeMetrics) bridge the gap. Client never sees DB types.","classification":"tactical","recorded_at":"2026-02-17T06:02:29.313Z","id":"mx-350a4d"}
{"type":"convention","content":"When DB type name conflicts with viz protocol type, prefix DB type with Db (e.g., DbMergeQueueEntry vs MergeQueueEntry). DB-internal types get the Db prefix; viz wire types keep the clean name.","classification":"tactical","recorded_at":"2026-02-17T05:53:49.328Z","evidence":{"commit":"abbed77"},"id":"mx-16f124"}
{"type":"convention","content":"When DB type name conflicts with viz protocol type, prefix DB type with Db (e.g., DbMergeQueueEntry vs MergeQueueEntry). Viz types own the clean names since they're the public API.","classification":"tactical","recorded_at":"2026-02-17T06:02:30.531Z","id":"mx-d5240f"}
{"type":"convention","content":"swarm-viz build script must cp client/index.html dist/index.html after bun build, otherwise the server's static file handler returns 'Not Found' for the root route. Build script: 'bun build client/main.ts --outdir dist --minify && cp client/index.html dist/index.html'","classification":"tactical","recorded_at":"2026-02-17T06:24:26.004Z","evidence":{"commit":"b6c526e"},"id":"mx-57d586"}
